import React from "react";

const ScheduleInfo = () => {
  const now = new Date();
  const hour = now.getHours();
  const minutes = now.getMinutes();
  const isWeekend = now.getDay() === 0 || now.getDay() === 6;
  const formattedTime = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  const formattedDate = now.toLocaleDateString();

  let phase = "";
  if (hour < 9 || (hour === 9 && minutes < 30)) {
    phase = "â³ Fase previa (antes de 9:30 a.m.)";
  } else if (hour === 9 && minutes >= 30 && minutes <= 45) {
    phase = "ğŸš• TAXI: SelecciÃ³n y entrada del activo";
  } else if (hour >= 10 && hour < 11) {
    phase = "ğŸ•š Ajustes tÃ¡cticos (SL/TP)";
  } else if (hour >= 13 && hour < 15) {
    phase = "ğŸ•’ EvaluaciÃ³n o cierre parcial";
  } else if (hour >= 15 && hour < 16) {
    phase = "ğŸ”š Cierre total obligatorio (3:30 p.m.)";
  } else {
    phase = "ğŸ” Fuera del horario operativo";
  }

  const isOperational = !isWeekend && hour >= 9;

  return (
    <div className="bg-gray-800 p-4 rounded-xl shadow-lg text-white mt-4">
      <div className="text-sm mb-2">ğŸ“… {formattedDate} â€“ ğŸ•’ {formattedTime}</div>
      <div className="text-lg font-semibold">{phase}</div>
      {!isOperational && (
        <div className="text-yellow-400 mt-2">
          âš ï¸ Hoy no es un dÃ­a operativo. Las estrategias estÃ¡n ocultas.
        </div>
      )}
      {isOperational && hour >= 9 && (
        <div className="mt-2 text-sm text-green-400">
          âœ… Estrategia CODE disponible. Esperando confirmaciÃ³n de G/P para ajustes.
          <br />
          ğŸ¯ SL/TP tentativos: SL = -$20 | TP1 = +$25 | TP2 = +$50
        </div>
      )}
    </div>
  );
};

export default ScheduleInfo;
